###############################################################################
## 1. PORTAS EXTERNAS – altere conforme conflito na máquina/servidor
###############################################################################
PORT_MINIO=9001
PORT_SUPABASE=54321
PORT_PG_SAFIRA=5432
PORT_PG_PAGAMENTO=5433
PORT_PG_JIRA=5434
PORT_REDIS=6379
PORT_PROMETHEUS=9090
PORT_GRAFANA=3000
PORT_LOKI=3100
PORT_TRAEFIK_HTTP=80
PORT_TRAEFIK_HTTPS=443
PORT_SAFIRA=5678
PORT_ADMIN=5680
PORT_OLLAMA=11434
PORT_CSM=5050
PORT_STT=9000
PORT_VENOM=3001
PORT_IMG_READER=6001
PORT_IMG_GEN=6002
PORT_AI_FUN=8800
PORT_JENKINS_WEB=8081
PORT_JENKINS_AGENT=50000
PORT_SPARK_MASTER=7077
PORT_SPARK_UI=8088
PORT_JIRA=8090
PORT_DOCS=8008
PORT_FILEMAN=8080
PORT_BACKUP=9009

###############################################################################
## 2. DADOS DE ACESSO “PÚBLICOS” (ficam visíveis em docker inspect)
###############################################################################
# Postgres (user único – senhas ficam em secrets)
POSTGRES_USER=safira

# MinIO
MINIO_ROOT_USER=minioadmin

# n8n (painéis Web)
N8N_BASIC_AUTH_USER=safira

# Grafana
GF_SECURITY_ADMIN_USER=admin      # senha vai em secret grafana_pwd

# Jenkins
JENKINS_ADMIN_ID=admin            # senha em secret jenkins_admin_pwd (ou deixe aqui)

# Fuso horário geral
GENERIC_TIMEZONE=America/Sao_Paulo

# Redis tuning
REDIS_MAXMEMORY=256mb

# Traefik logging / segurança
TRAEFIK_LOG_LEVEL=INFO
TRAEFIK_GLOBAL_CHECK_NEW_VERSION=false
TRAEFIK_PROVIDERS_DOCKER_EXPOSEDPORSTBYDEFAULT=false

# Porta fallback usada pelo macro x-health-http
HEALTH_PORT=8080

###############################################################################
## 3. Configuração de APLICATIVOS
###############################################################################
### — n8n (Safira/Admin) —
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=db-safira
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=n8n
DB_POSTGRESDB_USER=${POSTGRES_USER}
DB_POSTGRESDB_PASSWORD_FILE=/run/secrets/pg_safira_pwd   # NÃO deixe valor em texto!
# Execuções por fila Bull + Redis
EXECUTIONS_PROCESS=queue
QUEUE_BULL_REDIS_HOST=redis
QUEUE_BULL_REDIS_PORT=${PORT_REDIS}
# Para habilitar senha no Redis, coloque o caminho do secret:
# QUEUE_BULL_REDIS_PASSWORD_FILE=/run/secrets/redis_pwd

### — Supabase —
POSTGRES_PASSWORD_FILE=/run/secrets/supa_db_pwd
JWT_SECRET_FILE=/run/secrets/jwt_secret
ANON_KEY_FILE=/run/secrets/anon_key
SERVICE_ROLE_KEY_FILE=/run/secrets/service_role_key

### — Grafana —
GF_SECURITY_ADMIN_PASSWORD__FILE=/run/secrets/grafana_pwd

### — Traefik —
TRAEFIK_API_AUTH_FILE=/run/secrets/traefik_pwd

### — Spark —
SPARK_MASTER_HOST=spark
SPARK_WORKER_MEMORY=2g
SPARK_WORKER_CORES=2

### — AI‑Functions / OpenAI —
OPENAI_API_KEY=sk-CHANGE_ME

###############################################################################
## 4. LISTA DE SECRETS (não ficam neste arquivo!)
##    • crie-os com `docker secret create …`
###############################################################################
#  pg_safira_pwd       # senha do Postgres “safira”
#  pg_pagamento_pwd    # senha do Postgres “pagamento”
#  pg_jira_pwd         # senha do Postgres “jira”
#  minio_pwd           # senha root do MinIO
#  grafana_pwd         # senha admin Grafana
#  traefik_pwd         # linha htpasswd (user:pass) para painel Traefik
#  supa_db_pwd         # senha interna do banco Supabase
#  jwt_secret          # segredo JWT Supabase
#  anon_key            # chave pública Supabase
#  service_role_key    # chave de serviço Supabase
#  redis_pwd           # (opcional) senha Redis
#  jenkins_admin_pwd   # (opcional) senha Jenkins se preferir secret

###############################################################################
## 5. LEMBRETES DE CRIAÇÃO RÁPIDA
###############################################################################
# echo "POSTGRES_SENHA_SAFIRA"    | docker secret create pg_safira_pwd -
# echo "POSTGRES_SENHA_PAGAMENTO" | docker secret create pg_pagamento_pwd -
# echo "POSTGRES_SENHA_JIRA"      | docker secret create pg_jira_pwd -
# echo "MINIO_SENHA"              | docker secret create minio_pwd       -
# echo "GRAFANA_SENHA"            | docker secret create grafana_pwd     -
# echo "htpasswd -nb admin senha" | docker secret create traefik_pwd     -
# echo "SUPABASE_DB_PWD"          | docker secret create supa_db_pwd     -
# echo "RANDOM_JWT_SECRET"        | docker secret create jwt_secret      -
# echo "RANDOM_ANON_KEY"          | docker secret create anon_key        -
# echo "RANDOM_SERVICE_KEY"       | docker secret create service_role_key-
# (repita para redis_pwd, jenkins_admin_pwd se necessário)
